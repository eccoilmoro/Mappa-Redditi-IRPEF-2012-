<!DOCTYPE html>
<html>
<head>
	<title>Leaflet UTFGrid on Countries Demo | TechSlides</title>
	<link rel="stylesheet" href="leaflet.css" />
	<!--[if lte IE 8]><link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.5.1/leaflet.ie.css" /><![endif]-->

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<script src="leaflet.js"></script>
	<script src="leaflet.utfgrid.js"></script>
	<script type="text/javascript">
	var _gaq = _gaq || [];
	_gaq.push(['_setAccount', 'UA-941940-28']);
	_gaq.push(['_trackPageview']);

	(function() {
	  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
	  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
	  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
	})();
	</script>
</head>
<body>
	<h1>Simple Demo of a Leaflet World Map with UTFGrid for Countries</h1>
	<p>UTFGrid from MapBox layer, Image tiles from CloudMate. Check out the source. <a href="http://techslides.com/leaflet-map-with-utfgrid-and-php-served-mbtiles/">Back to Article</a></p>
	<div id="map" style="width: 512px; height: 256px"></div>
	<div id="click"></div>
	<div id="hover"></div>
		
	<script type="text/javascript">

		var cloudmade = new L.TileLayer('http://{s}.tile.cloudmade.com/BC9A493B41014CAABB98F0471D759707/998/256/{z}/{x}/{y}.png');

		var utfGrid = new L.UtfGrid('http://{s}.tiles.mapbox.com/v3/mapbox.geography-class/{z}/{x}/{y}.grid.json?callback={cb}');
		
		var interactiveLayerGroup = L.layerGroup([
			cloudmade,
			utfGrid
		]);
		
		//Events
		utfGrid.on('click', function (e) {
			if (e.data) {
				document.getElementById('click').innerHTML = 'click: ' + e.data.admin;
			} else {
				document.getElementById('click').innerHTML = 'click: nothing';
			}
		}); 
		utfGrid.on('mouseover', function (e) {
			if (e.data) {
				document.getElementById('hover').innerHTML = 'hover: ' + e.data.admin;
			} else {
				document.getElementById('hover').innerHTML = 'hover: nothing';
			}
		});

		//Create our map with just the base TileLayer
		var map = L.map('map')
				.setView([0, 0], 1)
				.addLayer(interactiveLayerGroup);

	</script>
</body>
</html>