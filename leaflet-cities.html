<!DOCTYPE html>
<html>
<head>
	<title>Leaflet Map of Most Populous Cities via UTFGrid and Mbtiles | TechSlides</title>
	<link rel="stylesheet" href="leaflet.css" />
	<!--[if lte IE 8]><link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.5.1/leaflet.ie.css" /><![endif]-->

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<script src="leaflet.js"></script>
	<script src="leaflet.utfgrid.js"></script>
	<script type="text/javascript">
	var _gaq = _gaq || [];
	_gaq.push(['_setAccount', 'UA-941940-28']);
	_gaq.push(['_trackPageview']);

	(function() {
	  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
	  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
	  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
	})();
	</script>
</head>
<body>
	<h1>Leaflet World Map of Top 1,000 Largest Cities</h1>
	<p>Leaflet Map showing the top 1,000 World Cities by Population using UTFGrid and serving image tiles via custom PHP script. <a href="http://techslides.com/leaflet-map-with-utfgrid-and-php-served-mbtiles/">Back to Article</a></p>
	<div id="map" style="width: 1024px; height: 512px"></div>
	<div id="hover"></div>
	
	<script type="text/javascript">

		var custom = new L.TileLayer('http://techslides.com/demos/mbtiles/city-by-population/{z}/{x}/{y}.png');

		var utfGrid = new L.UtfGrid('http://techslides.com/demos/mbtiles/city-by-population/{z}/{x}/{y}.grid.json?callback={cb}');

		var interactiveLayerGroup = L.layerGroup([
			custom,
			utfGrid
		]);	
		
		//Events
		utfGrid.on('mouseover', function (e) {
			if (e.data) {
				document.getElementById('hover').innerHTML = '<b>City: </b> ' + e.data.AccentCity + '<br><b>Population: </b>' + e.data.Population;
			} else {
				document.getElementById('hover').innerHTML = '';
			}
		});
		utfGrid.on('mouseout', function (e) {
			document.getElementById('hover').innerHTML = '';
		});

		var map = L.map('map')
				.setView([10, 10], 2)
				.addLayer(interactiveLayerGroup);
	</script>
</body>
</html>